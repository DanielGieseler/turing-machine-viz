var TMViz=function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return t[r].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var r=window.webpackJsonp_name_;window.webpackJsonp_name_=function(a,o){for(var s,u,c=0,l=[];c<a.length;c++)u=a[c],i[u]&&l.push.apply(l,i[u]),i[u]=0;for(s in o)t[s]=o[s];for(r&&r(a,o);l.length;)l.shift().call(null,e);return o[0]?(n[0]=0,e(0)):void 0};var n={},i={0:0};return e.e=function(t,r){if(0===i[t])return r.call(null,e);if(void 0!==i[t])i[t].push(r);else{i[t]=[r];var n=document.getElementsByTagName("head")[0],a=document.createElement("script");a.type="text/javascript",a.charset="utf-8",a.async=!0,a.src=e.p+""+t+"."+({1:"main"}[t]||t)+".bundle.js",n.appendChild(a)}},e.m=t,e.c=n,e.p="/build/",e(0)}({0:function(t,e,r){t.exports=r(10)},1:function(t,e){t.exports=_},2:function(t,e){t.exports=d3},5:function(t,e){t.exports=lodash},10:function(t,e,r){"use strict";function n(t,e){return function(r,n){var i=t.getInstructionAndEdge(r,n);return null==i?null:(e(i.edge),i.instruction)}}function i(t){var e=f.select(t.domNode),r=e.style("stroke"),n=f.select("#active-arrowhead").style("stroke");return e.classed("active-edge",!0).transition().style("stroke",n).style("stroke-width","3").transition().style("stroke",r).style("stroke-width","1").transition().duration(0).each("start",function(){f.select(this).classed("active-edge",!1)}).style("stroke",null).style("stroke-width",null)}function a(t,e){return new u(t.append("svg").attr("class","tm-tape"),9,e.blank,e.input?String(e.input).split(""):[])}function o(t,e,r){function o(t){var e=h.edgeAnimation(t);h.isRunning&&e.transition().duration(h.stepInterval).each("end",function(){h.isRunning&&h.step()})}t=f.select(t);var u=new c(e.table);this.__stateviz=new l(t.append("svg"),u.getVertexMap(),u.getEdges()),void 0!=r&&(this.positionTable=r),this.edgeAnimation=i,this.stepInterval=100;var h=this;this.machine=new s(n(u,o),e.startState,a(t,e)),p(this.machine,"state",function(t,e,r){return f.select(u.getVertex(e).domNode).classed("current-state",!1),f.select(u.getVertex(r).domNode).classed("current-state",!0),r}),this.isHalted=!1;var d=!1;Object.defineProperty(this,"isRunning",{configurable:!0,get:function(){return d},set:function(t){d!==t&&(d=t,d&&this.step())}}),this.__parentDiv=t,this.__spec=e}var s=r(11).TuringMachine,u=r(49),c=r(46),l=r(47),p=r(16).watchInit,f=r(2);o.prototype.step=function(){this.machine.step()||(this.isRunning=!1,this.isHalted=!0)},o.prototype.reset=function(){this.isRunning=!1,this.isHalted=!1,this.machine.state=this.__spec.startState,this.machine.tape.domNode.remove(),this.machine.tape=a(this.__parentDiv,this.__spec)},Object.defineProperty(o.prototype,"positionTable",{get:function(){return this.__stateviz.positionTable},set:function(t){this.__stateviz.positionTable=t}}),t.exports=o},11:function(t,e){"use strict";function r(t,e,r){this.transition=t,this.state=e,this.tape=r}function n(t,e){switch(e){case i.right:t.headRight();break;case i.left:t.headLeft();break;default:throw new TypeError("not a valid tape movement: "+String(e))}}r.prototype.toString=function(){return String(this.state)+"\n"+String(this.tape)},r.prototype.step=function(){var t=this.nextInstruction;return null==t?!1:(this.tape.write(t.symbol),n(this.tape,t.move),this.state=t.state,!0)},Object.defineProperties(r.prototype,{nextInstruction:{get:function(){return this.transition(this.state,this.tape.read())},enumerable:!0},isHalted:{get:function(){return null==this.nextInstruction},enumerable:!0}});var i=Object.freeze({left:{toString:function(){return"L"}},right:{toString:function(){return"R"}}}),a=Object.freeze({left:i.right,right:i.left});e.MoveHead=i,e.MoveTape=a,e.TuringMachine=r},16:function(t,e,r){"use strict";function n(t,e,r){var n=Object.getOwnPropertyDescriptor(t,e);if(void 0===n)throw new TypeError("Cannot watch nonexistent property '"+e+"'");if(!n.configurable)throw new TypeError("Cannot watch non-configurable property '"+e+"'");if(n.writable||void 0!==n.set){var i=function(){if(n.set)return{get:n.get,set:function(i){return n.set.call(t,r.call(t,e,t[e],i))}};var i=n.value;return{get:function(){return i},set:function(n){return i=r.call(t,e,i,n)}}}();return Object.defineProperty(t,e,i),n}}function i(t,e,r){var i=t[e],a=n(t,e,r);return a&&(t[e]=i),a}e.watch=n,e.watchInit=i},19:function(t,e,r){t.exports=r.p+"state-diagram/StateViz.css"},20:function(t,e,r){t.exports=r.p+"tape/tape.css"},46:function(t,e,r){"use strict";function n(t){var e=u.mapValues(t,function(t,e){return{label:e,transitions:t}}),r=[];return u.forEach(e,function(t,n){t.transitions=t.transitions&&function(){function o(n,i){var a=c[n]||u.tap(c[n]={source:t,target:e[n],labels:[]},r.push.bind(r));return a.labels.push(i),a}var s={},c={};return u.forEach(t.transitions,function(t,e){var r=e.split(",").reduce(function(t,e){return""===e&&""===t[t.length-1]?t[t.length-1]=",":t.push(e),t},[]),u=null!=t.state?t.state:n,c=o(u,a(r,t));r.forEach(function(e){s[e]={instruction:i(n,e,t),edge:c}})}),s}()}),{graph:e,edges:r}}function i(t,e,r){return u.defaults({},r,{state:t,symbol:e})}function a(t,e){var r=(null==e.symbol?"":o(String(e.symbol))+",")+String(e.move);return t.map(o).join(",")+"→"+r}function o(t){return" "===t?"␣":t}function s(t){var e=n(t);Object.defineProperties(this,{__graph:{value:e.graph},__edges:{value:e.edges}})}var u=r(5);s.prototype.getVertexMap=function(){return this.__graph},s.prototype.getEdges=function(){return this.__edges},s.prototype.getVertex=function(t){return this.__graph[t]},s.prototype.getInstructionAndEdge=function(t,e){var r=this.__graph[t];if(void 0===r)throw new Error("not a valid state: "+String(t));return r.transitions&&r.transitions[e]},t.exports=s},47:function(t,e,r){"use strict";function n(t,e){return t.map(function(t,r){return t+e[r]})}function i(t){return t.map(function(t){return-t})}function a(t,e){return n(t,i(e))}function o(t,e){return t.map(function(t){return e*t})}function s(t){function e(t){return t*t}function r(t,e){return t+e}return t.map(e).reduce(r,0)}function u(t){return Math.sqrt(s(t))}function c(t){var e=u(t);return t.map(function(t){return t/e})}function l(t){var e=t[0],r=t[1];return Math.atan2(r,e)}function p(t,e){return[Math.cos(e)*t,Math.sin(e)*t]}function f(t){t.forEach(function(t){var e=t.source.index+","+t.target.index;this[e]=(this[e]||0)+1},this)}function h(t,e,r){var i,s;return e===_.loop?(i=p(t,-15*Math.PI/180),s=" a 19,27 45 1,1 "+i[0]+","+(i[1]+t),function(){var e=r.source.x,n=r.source.y;return"M "+e+","+(n-t)+s}):e===_.arc?function(){var e=[r.source.x,r.source.y],i=[r.target.x,r.target.y],o=a(i,e),s=1.2*u(o),c=l(o),f=-Math.PI/2/2,h=n(e,p(t,c+f)),d=n(i,p(t,c+Math.PI-f));return e[0]<=i[0]?"M "+h[0]+" "+h[1]+" A "+s+" "+s+" 0 0,1 "+d[0]+" "+d[1]:"M "+d[0]+" "+d[1]+" A "+s+" "+s+" 0 0,0 "+h[0]+" "+h[1]}:e===_.straight?function(){var e=[r.source.x,r.source.y],n=[r.target.x,r.target.y],i=a(n,e);if(0===i[0]&&0===i[1])return null;var s=a(n,o(c(i),t));return"M "+e[0]+" "+e[1]+" L "+s[0]+" "+s[1]}:void 0}function d(t){return{x:t.x+t.width/2,y:t.y+t.height/2}}function g(t){return t}function v(){}function y(t,e,r){return Math.max(t,Math.min(r,e))}function x(t,e,r){function n(e){e.fixed=!0,t.transition().style("box-shadow","inset 0 0 1px gold")}function i(){t.transition().style("box-shadow",null)}function a(t){t.fixed=!1,x.resume()}var o=800,s=500,u=140,c=20,l=w.scale.category10();t.attr({width:"100%",viewBox:[0,0,o,s].join(" "),version:"1.1",":xmlns":"http://www.w3.org/2000/svg",":xmlns:xlink":"http://www.w3.org/1999/xlink"});var p=e instanceof Array?e:b.values(e);this.__stateMap=e;var x=w.layout.force().nodes(p).links(r).size([o,s]).linkDistance([u]).charge([-500]).theta(.1).gravity(.05).start(),m=x.drag().on("dragstart",n).on("dragend",i),k=new f(r),M=t.selectAll(".edgepath").data(r).enter(),S=M.append("g"),O=function(t,e){return String(-1.1*(e+1))+"em"},j=function(t,e){return String(.6+1.1*(e+1))+"em"};S.each(function(t,e){var r=w.select(this),n=r.append("path").attr({"class":"edgepath",id:"edgepath"+e}).each(function(t){t.domNode=this}),i=r.selectAll(".edgelabel").data(t.labels).enter().append("text").attr("class","edgelabel");i.append("textPath").attr("xlink:href",function(){return"#edgepath"+e}).attr("startOffset","50%").text(g);var a=k.shapeForEdge(t);switch(t.getPath=h(c,a,t),a){case _.straight:i.attr("dy",O),t.refreshLabels=function(){i.attr("transform",function(){if(t.target.x<t.source.x){var e=d(this.getBBox());return"rotate(180 "+e.x+" "+e.y+")"}return null})};break;case _.arc:var o;t.refreshLabels=function(){var e=t.target.x<t.source.x;e!==o&&(n.classed("reversed-arc",e),i.attr("dy",e?j:O),o=e)};break;case _.loop:i.attr("transform",function(t,e){return"translate("+String(8*(e+1))+" "+String(-8*(e+1))+")"}),t.refreshLabels=v}});var E=S.selectAll(".edgepath"),A=t.selectAll(".node").data(p).enter(),P=A.append("circle").attr("class","node").attr("r",c).style("fill",function(t,e){return l(e)}).each(function(t){t.domNode=this}).on("dblclick",a).call(m),T=A.append("text").attr("class","nodelabel").attr("dy","0.25em").text(function(t){return t.label}),I=t.append("defs");I.selectAll("marker").data(["arrowhead","active-arrowhead","reversed-arrowhead","reversed-active-arrowhead"]).enter().append("marker").attr({id:function(t){return t},viewBox:"0 -5 10 10",refX:function(t){return 0===t.lastIndexOf("reversed-",0)?0:10},orient:"auto",markerWidth:10,markerHeight:10}).append("path").attr("d","M 0 -5 L 10 0 L 0 5 Z").attr("transform",function(t){return 0===t.lastIndexOf("reversed-",0)?"rotate(180 5 0)":null}),x.on("tick",function(){P.attr({cx:function(t){return t.x=y(c,o-c,t.x)},cy:function(t){return t.y=y(c,s-c,t.y)}}),T.attr("x",function(t){return t.x}).attr("y",function(t){return t.y}),E.attr("d",function(t){return t.getPath()}),S.each(function(t){t.refreshLabels()}),p.every(function(t){return t.fixed})&&x.stop()}),this.force=x}function m(t,e){b.forEach(function(e,r){var n=t[r];void 0!==n&&k(e,n)},e)}var w=r(2),b=r(1),k=r(5).assign;f.prototype.numEdgesFromTo=function(t,e){return this[String(t)+","+String(e)]||0};var _=Object.freeze({loop:{},arc:{},straight:{}});f.prototype.shapeForEdge=function(t){return t.target.index===t.source.index?_.loop:this.numEdgesFromTo(t.target.index,t.source.index)?_.arc:_.straight},r(19);var M=b.mapValues(b.pick(["x","y","px","py","fixed"]));Object.defineProperty(x.prototype,"positionTable",{get:function(){return M(this.__stateMap)},set:function(t){m(t,this.__stateMap),this.force.resume()}}),t.exports=x},48:function(t,e,r){"use strict";function n(t,e){Object.defineProperty(this,"blank",{value:t,writable:!1,enumerable:!0}),this.tape={before:[],after:null==e||0==e.length?[t]:e.slice().reverse(),toString:function(){return this.before.join("")+"🔎"+this.after.slice().reverse().join("")}}}var i=r(1);n.prototype.read=function(){return i.last(this.tape.after)},n.prototype.write=function(t){this.tape.after[this.tape.after.length-1]=t},n.prototype.headRight=function(){var t=this.tape.before,e=this.tape.after;t.push(e.pop()),i.isEmpty(e)&&e.push(this.blank)},n.prototype.headLeft=function(){var t=this.tape.before,e=this.tape.after;i.isEmpty(t)&&t.push(this.blank),e.push(t.pop())},n.prototype.toString=function(){return this.tape.toString()},n.prototype.readOffset=function(t){var e=this.tape;return t>=0?t<=e.after.length-1?e.after[e.after.length-1-t]:this.blank:t>=-e.before.length?e.before[e.before.length+t]:this.blank},n.prototype.readRange=function(t,e){return i.range(t,e+1).map(function(t){return this.readOffset(t)},this)},t.exports=n},49:function(t,e,r){"use strict";function n(t){return t.attr("class","tape-cell"),t.append("rect").datum(null).attr({width:l,height:p}),t.append("text").text(function(t){return t}).attr({x:l/2,y:p/2+8}),t}function i(t,e){return e=null==e?0:e,t.attr("transform",function(t,r){return"translate("+(-l+10+l*(r+e))+")"}),t}function a(t){t.attr("transform","translate(0 10)").transition().duration(0).select(".exiting").remove()}function o(t,e,r,o){u.call(this,r,o),Object.defineProperty(this,"lookaround",{value:e,writable:!1,enumerable:!0}),Object.defineProperty(this,"domNode",{value:t,writable:!1,enumerable:!0});var s=l*(e+1+e-2)+20,c=p+20;t.attr({width:"95%",viewBox:[0,0,s,c].join(" ")}),this.wrapper=t.append("g").attr("class","wrapper").call(a),t.append("rect").attr({id:"tape-head",width:1.2*l,height:1.2*p,x:-l+5+l*e,y:5}),this.wrapper.selectAll(".tape-cell").data(this.readRange(-e,e)).enter().append("g").call(n).call(i)}function s(t,e,r,o,s){e.call(n),r.classed("exiting",!0),t.selectAll(".tape-cell").call(i,s),t.attr("transform","translate("+(o*l).toString()+" 10)").transition().call(a)}var u=r(48),c=r(2);r(20);var l=50,p=50;o.prototype=Object.create(u.prototype),o.prototype.constructor=o,o.prototype.write=function(t){u.prototype.read.call(this)!==t&&(u.prototype.write.call(this,t),this.wrapper.selectAll(".exiting").remove(),c.select(this.wrapper[0][0].childNodes[this.lookaround]).datum(t).select("text").attr("fill-opacity","1").attr("stroke-opacity","1").transition().attr("fill-opacity","0.4").attr("stroke-opacity","0.1").transition().text(function(t){return t}).attr("fill-opacity","1").attr("stroke-opacity","1").transition().duration(0).attr("fill-opacity",null).attr("stroke-opacity",null))},o.prototype.headRight=function(){u.prototype.headRight.call(this),this.wrapper.selectAll(".exiting").remove(),s(this.wrapper,this.wrapper.append("g").datum(this.readOffset(this.lookaround)),this.wrapper.select(".tape-cell"),1,-1)},o.prototype.headLeft=function(){u.prototype.headLeft.call(this),this.wrapper.selectAll(".exiting").remove(),s(this.wrapper,this.wrapper.insert("g",":first-child").datum(this.readOffset(-this.lookaround)),this.wrapper.select(".wrapper > .tape-cell:last-of-type"),-1,0)},t.exports=o}});
//# sourceMappingURL=TMViz.bundle.js.map